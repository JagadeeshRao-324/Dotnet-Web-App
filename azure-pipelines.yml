# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger: none

variables:
  buildConfiguration: 'Release'


stages:
  - stage: 'BuildandTest'
    jobs:
    - job: Build
      pool:
        vmImage: 'windows-latest'
      steps:
      - task: UseDotNet@2
        inputs:
          packageType: 'sdk'
          version: '6.x.x'

      - task: SonarCloudPrepare@3
        inputs:
          SonarQube: 'SonarQube cloud'
          organization: 'devopspractice-2025'
          scannerMode: 'dotnet'
          projectKey: '9060128d289ee88e4b1ca57aeff5236ec1acd1ab'
          projectName: 'pipelines-dotnet-core.git'

      - task: DotNetCoreCLI@2
        inputs:
          command: 'restore'
          projects: '/*.csproj'
          feedsToUse: 'select'
          vstsFeed: 'bc03c712-44c4-4932-87ba-ac35eaa10b33/0d882750-e9f7-4349-9c31-ece9b225e1fc'

      - task: DotNetCoreCLI@2
        inputs:
          command: 'build'
          projects: '/*.csproj'
          arguments: '--configuration  $(buildConfiguration)'

      - task: SonarCloudAnalyze@3
        inputs:
          jdkversion: 'JAVA_HOME_17_X64'
          



